echo "Deleting all Docker images with name containing 'bradenacurtis801' on ${HOSTNAME}..."

# List images with names containing 'bradenacurtis801' and extract their IDs
images=$(sudo docker images | grep "bradenacurtis801" | awk '{print $3}')

if [ -n "$images" ]; then
    # Stop and remove containers that are using the images
    for image_id in $images; do
        containers=$(sudo docker ps -a | grep "$image_id" | awk '{print $1}')
        for container_id in $containers; do
            sudo docker stop $container_id
            sudo docker rm $container_id
        done
    done

    # Remove the images
    sudo docker rmi -f $images
fi

